<div class="busqueda">
  <input type="text" pInputText [(ngModel)]="campoBusqueda" placeholder="Buscar personaje..." />
  <p-button label="Buscar Personaje" icon="pi pi-search" (onClick)="buscar()" severity="contrast" />
</div>

<div class="tabla-container">
  <p-table [value]="personajesFiltrados" [tableStyle]="{ 'min-width': '50rem' }" styleClass="p-datatable-striped">
    <ng-template #header>
      <tr>
        <th>Nombre</th>
        <th>Raza</th>
        <th>Fecha Nacimiento</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template #body let-item>
      <tr>
        <td>{{item.nombre}}</td>
        <td>{{item.raza}}</td>
        <td>{{item.fechaNacimiento}}</td>
      
        <td>
          <!-- Botón Editar -->
          <p-button 
            icon="pi pi-pencil" 
            severity="warn" 
            [rounded]="true"
            [text]="true"
            (onClick)="editar(item.id)"
            pTooltip="Editar">
          </p-button>
          
          <!-- Popup Baja Lógica / Reactivar -->
          <app-confirmar-popup 
            #popupBajaLogica
            [config]="getPopupConfig(item.id, 'bajaLogica')" 
            (onConfirm)="onPopupConfirm($event, popupBajaLogica)">
          </app-confirmar-popup>
          
          <app-confirmar-popup 
            #popupReactivar
            [config]="getPopupConfig(item.id, 'reactivar')" 
            (onConfirm)="onPopupConfirm($event, popupReactivar)">
          </app-confirmar-popup>
          
          <!-- Popup Baja Física -->
          <app-confirmar-popup 
            #popupBajaFisica
            [config]="getPopupConfig(item.id, 'bajaFisica')" 
            (onConfirm)="onPopupConfirm($event, popupBajaFisica)">
          </app-confirmar-popup>
        </td>
      </tr>
    </ng-template>
    <ng-template #emptymessage>
      <tr>
        <td colspan="4" style="text-align: center;">No hay personajes disponibles</td>
      </tr>
    </ng-template>
  </p-table>
</div>